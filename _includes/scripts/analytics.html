{%- if site.enable_google_analytics -%}
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ window.dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', '{{ site.google_analytics }}');

    document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('a[href^="http"]').forEach(function(link) {
        if (link.hostname !== window.location.hostname) {
          link.addEventListener('click', function() {
            gtag('event', 'click_external_link', {
              'link_url': this.href,
              'link_text': this.textContent.trim(),
              'page_path': window.location.pathname
            });
          });
        }
      });

      document.querySelectorAll('.news a, .social a').forEach(function(link) {
        link.addEventListener('click', function() {
          gtag('event', 'click_social_link', {
            'link_url': this.href,
            'link_text': this.textContent.trim()
          });
        });
      });
    });
  </script>
{%- endif -%}
{%- if site.enable_cronitor_analytics -%}
  <!-- Cronitor RUM -->
  <script async src="https://rum.cronitor.io/script.js"></script>
  <script>
    window.cronitor = window.cronitor || function() { (window.cronitor.q = window.cronitor.q || []).push(arguments); };
    cronitor('config', { clientKey: '{{site.cronitor_analytics}}' });
  </script>
{%- endif -%}
